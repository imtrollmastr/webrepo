<html>
  <head>
    <title>USER LOGIN | imtrollmastr</title>
<link rel="icon" href="images/favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap');
  body {
    background-color: lightblue;
    padding: 30px;
    font-family: 'Luckiest Guy', cursive;
  }

  h2, h3, h4 {
  font-family: 'Luckiest Guy', cursive;
}
</style>
<script>
  function checkPassword() {
    var password = document.getElementById("passwordBox");
    var passwordText = password.value;
    if(passwordText == "userACCESS123") {
      return true;
    }
    alert("ErrorData: accessdenied; returnedVoid")
    return false
  }
</script>
   </head>
   <body>
    <h3>Welcome to the Authorization Page for imtrollmastr</h3>
    <p>Please state your username, password.</p>
    <p>NOTICE: The password is currently hidden unless you are given the password.</p>
    <p>Sorry for any inconvenience.</p>
    <form method="contact">
        <label for="username">Username:</label>
        <input type="text" name="username" required>
    <p>Password:<input id="passwordBox" type="password"/></p>
      <a href="index.html" onclick="return checkPassword();">Authorize</a>
      <p>LOGIN WITH GOOGLE</p>
      <div class="g-signin2" data-onsuccess="onSignIn"></div>
        <script>
        function onSignIn(googleUser) {
  // Get the user's ID token and basic profile information
  var id_token = googleUser.getAuthResponse().id_token;
  var profile = googleUser.getBasicProfile();
  
  // Send the ID token and profile information to your server-side code for verification
  // (replace "VERIFY_TOKEN_URL" with the URL of your server-side verification endpoint)
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'VERIFY_TOKEN_URL');
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.onload = function() {
    if (xhr.status === 200) {
      // Verification successful, log the user in to your website and redirect to the homepage
      // (replace this with your own login code)
      window.location.href = "/index.html?name=" + profile.getName() + "&email=" + profile.getEmail() + "&picture=" + profile.getImageUrl();
    } else {
      // Verification failed, handle the error
      console.error('Token verification failed: ' + xhr.responseText);
    }
  };
  xhr.open('POST', 'https://imtrollmastr.vercel.app/verify_token.php');
xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
xhr.onload = function() {
  if (xhr.status === 200) {
    // Verification successful, log the user in to your website and redirect to the homepage
    // (replace this with your own login code)
    window.location.href = "/index.html?email=" + email;
  } else {
    // Verification failed, handle the error
    console.error('Token verification failed: ' + xhr.responseText);
  }
};
xhr.send('idtoken=' + id_token);
}
      </script>
      </body>
</html>
